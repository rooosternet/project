<%= form_for(message,:url => in_messages_path  ,:html => { :method => :post, :class => "message-to" ,:role => 'form', :id => 'new_message_form_id'}) do |f| %>
	<%= f.hidden_field(:from_id,value: current_user.id) %>
	<div class="form-body">
		<div class="form-row">
			<label class="form-label">To</label>

			<div class="form-controls">
				<%= f.hidden_field :to_id , {class: "form-control form-to"}%>
				<input type="text" id="select_in_message_to_id" class="form-control form-to" placeholder="name go here..">
			</div>
		</div>

		<div class="form-row">
			<label class="form-label">Message</label>

			<div class="form-controls">				
				<%= f.text_area :note ,:rows => 6, :class =>"form-control" ,:placeholder => "" %>		
			</div>
		</div>
	</div>

	<div class="form-actions">
		<%= f.submit 'Send Message' , class: 'btn' %>
	</div>
<% end %>
<!-- User.all.map {|u| [u.name,u.id] unless u.id.eql?(current_user.id)}.to_json  -->

<script type="text/javascript">
   var data = <%=raw User.all.collect {|u| {value: u.name, id: u.id} unless u.id.eql?(current_user.id)}.compact.to_json %>;
    // data = [null,{"value": "yossi edri", "id": 1},{"value": "yoav weitzman","id": 2}]
    $(function(){
      $("#select_in_message_to_id").autocomplete({ 
        source:data,
        select: function(event,ui){
          $("#in_message_to_id").val( ui.item.id );
          console.log($("#in_message_to_id").val());
        } 
      });    
    })
</script>
